# [TypeScript] `enum` -> `literal` íƒ€ì… ê°ˆì•„íƒ€ê¸°(+`class-validator`, `template literal` íƒ€ì… í™œìš©)

### 3ì¤„ ìš”ì•½

> - `enum`ì€ tree-shaking, memory-leak ë¬¸ì œê°€ ìˆê³ , ì—¬ëŸ¬ enumì„ í•˜ë‚˜ì˜ enumìœ¼ë¡œ í•©ì¹  ìˆ˜ ì—†ë‹¤
> - `class-validator`ì—ì„œ `IsEnum`ì„ ì“°ë ¤ë©´, íƒ€ì…ì´ ì•„ë‹Œ ê°ì²´ê°€ í•„ìš”í•˜ë‹¤
> - `literal`ê³¼ `Readonly<Record<K, V>>` ìœ í‹¸ íƒ€ì…ì„ í™œìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í–ˆë‹¤

[ğŸ‘‰ hashnodeì—ì„œ ë³´ê¸°](https://wiii.hashnode.dev/enum-to-template-literal)

---

## `enum`ì€ ë¹„ì‹¸ê³  ë¶ˆí¸í•˜ë‹¤!

ë‹¤ë¥¸ ì–¸ì–´ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `TypeScript`ë„ ì—´ê±°í˜• íƒ€ì…ìœ¼ë¡œ [`enum`](https://www.typescriptlang.org/ko/docs/handbook/enums.html)ì„ ì œê³µí•œë‹¤

í•¨ìˆ˜ ì¸ìë¡œ íŠ¹ì • stringë§Œ ë“¤ì–´ì™€ì•¼ í•˜ëŠ” ê²½ìš° ë“± ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤

<br />

### Tree-shaking, ë©”ëª¨ë¦¬ ë¬¸ì œ

ê·¸ëŸ¬ë‚˜ Line ê¸°ìˆ  ë¸”ë¡œê·¸(['TypeScript enumì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²Œ ì¢‹ì€ ì´ìœ ë¥¼ Tree-shaking ê´€ì ì—ì„œ ì†Œê°œí•©ë‹ˆë‹¤.'](https://engineering.linecorp.com/ko/blog/typescript-enum-tree-shaking/))ì—ì„œ ì˜ ì„¤ëª…í•˜ëŠ” ê²ƒì²˜ëŸ¼, ìˆœì§„í•œ enum íƒ€ì…ì€ tree-shakingì´ ì•ˆë˜ê³  ë©”ëª¨ë¦¬ ë‚­ë¹„ê¹Œì§€ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

<br />

### ì˜ˆìƒê³¼ëŠ” ë‹¤ë¥¸ Type Union

ë¬´ì—‡ë³´ë‹¤ ê°œì¸ì ìœ¼ë¡œ ê°€ì¥ ë¶ˆí¸í•˜ê²Œ ëŠê»´ì§€ëŠ” ê²ƒì€ ë‹¤ë¥¸ íƒ€ì…ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ, ***enumì€ `union`ìœ¼ë¡œ ì—¬ëŸ¬ enumì„ í•˜ë‚˜ë¡œ í•©ì¹  ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ë‹¤***

ì•„ë˜ ì˜ˆì‹œ ì½”ë“œëŠ” ì‹¤ë¬´ì—ì„œ êµ¬í˜„ ì¤‘ì¸ API íƒ€ì… ì¼ë¶€ë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•´ì„œ ê°€ì ¸ì˜¨ ê²ƒì´ê³ , ì „í˜•ì ì¸ enumì„ ê°€ì ¸ì™”ë‹¤

```typescript
enum PeriodA {
  DAILY = 'DAILY',
  MONTHLY = 'MONTHLY'
}

enum PeriodCommon {
  WEEKLY = 'WEEKLY',
  QUARTERLY = 'QUARTERLY',
  YEARLY = 'YEARLY'
}
```

[Union Type](https://www.typescriptlang.org/ko/docs/handbook/2/everyday-types.html#%EC%9C%A0%EB%8B%88%EC%96%B8-%ED%83%80%EC%9E%85)ì„ ì“°ëŠ” ëŒ€ë¶€ë¶„ì€ ì•„ë˜ì²˜ëŸ¼ A íƒ€ì… ì¼ìˆ˜ë„ ìˆê³ , B íƒ€ì…ì¼ ìˆ˜ë„ ìˆì„ ë•Œì´ë‹¤

```typescript
type StringOrNumber = string | number;

const strOrNumberLogger = (what: StringOrNumber) => console.log(what);
strOrNumberLogger('asdf');
strOrNumberLogger(123123);
```

<br />

**_ê·¸ëŸ¬ë‚˜ ì´ ë„˜ì˜ enumì€ ê·¸ë ‡ì§€ ì•Šë‹¤_** 

`PeriodA`ì™€ `PeriodCommon`ë¥¼ í•©ì¹œ `Periods`ë¼ëŠ” enumì„ ë§Œë“¤ê³  ì‹¶ì§€ë§Œ ê·¸ ê³¼ì •ì€ ì‰½ì§€ ì•Šë‹¤

ì•„ë˜ì²˜ëŸ¼ íƒ€ì… Unionì„ í•˜ë©´ ë‹¹ì¥ì€ ì—ëŸ¬ê°€ ë‚˜ì§„ ì•Šì§€ë§Œ, ì‹¤ì§ˆì ìœ¼ë¡œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” íƒ€ì…ì´ ëœë‹¤

```typescript
type Periods = PeriodA | PeriodCommon;

const periodLogger = (period: Periods) => console.log(period);
periodLogger('DAILY'); // error
```

<br />

Intersectionì€ ë”ë”ìš± ì•ˆëœë‹¤

ë‘˜ ì‚¬ì´ì— ê³µí†µì ì´ ì—†ê¸° ë•Œë¬¸ì— **`never`** íƒ€ì…ì´ ëœë‹¤

```typescript
type Periods = PeriodA & PeriodCommon; // -> never

const periodLogger = (period: Periods) => console.log(period);
periodLogger('DAILY'); // error
```

<br />

íƒ€ì… assertionìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì•ˆë‚¼ ìˆ˜ëŠ” ìˆëŠ”ë°..***ì•„ë¬´ ì˜ë¯¸ ì—†ëŠ” íƒ€ì… ì„ ì–¸***ì´ ë˜ì–´ ë²„ë¦°ë‹¤

![](https://images.velog.io/images/johnwi/post/669de5ad-34fb-4a23-b86e-a8cb8ea5326a/image.png)

<br />

---

## `class-validator`ì˜ `IsEnum`ì„ ì“°ë ¤ë©´ ê°ì²´ê°€ í•„ìš”í•˜ë‹¤!

ê°€ì¥ ì† í¸í•œê±´ ë‹¨ìˆœíˆ `literal`'ë§Œ' ì“°ëŠ” ê±°ë‹¤

í† ìŠ¤ ê¸°ìˆ  ë¸”ë¡œê·¸ [Template Literal Typesë¡œ íƒ€ì… ì•ˆì „í•˜ê²Œ ì½”ë”©í•˜ê¸°](https://toss.tech/article/template-literal-types)ì—ì„œ ì†Œê°œí•˜ëŠ” ê²ƒì²˜ëŸ¼, 

TypeScriptì—ëŠ” ë¬¸ìì—´ì„ ê°€ì§€ê³  ë‹¤ì–‘í•œ íƒ€ì…ì„ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆëŠ” ì¬ë¯¸ìˆëŠ”(?) ê¸°ëŠ¥ì´ ìˆë‹¤

<br />

ë‹¤ë§Œ ìœ„ì—ì„œ ì˜ˆì‹œë¡œ ê°€ì ¸ì˜¨ `Periods`ëŠ” ë‹¨ìˆœíˆ í•¨ìˆ˜ ì¸ìì˜ íƒ€ì…ë§Œ ì¶”ë¡ í•˜ëŠ”ë° ì“°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,

ì•„ë˜ì™€ ê°™ì´ **[`class-validator`](https://github.com/typestack/class-validator)ë¥¼ í™œìš©í•´ API ìš”ì²­ ìœ íš¨ì„± ê²€ì‚¬**ì—ë„ ì‚¬ìš©ë  ìˆ˜ ìˆì–´ì•¼í–ˆë‹¤

```typescript
export class GetChartDto {
  @IsNotEmpty()
  @IsEnum(Periods)
  period: PeriodNames;
}
```

<br />

ë‹¹ì—°í•œ ê±°ì§€ë§Œ, ì•„ë˜ì™€ ê°™ì´ typeì„ í•¨ìˆ˜ ì¸ìë¡œ ë„£ì„ ìˆ˜ëŠ” ì—†ë‹¤

![](https://images.velog.io/images/johnwi/post/515a911a-181d-4730-8f15-610f6dc508a3/image.png)


<br />

ìœ„ ë¼ì¸ ë¸”ë¡œê·¸ì—ì„œ ê°€ì¥ ì¶”ì²œí•˜ëŠ” ë°©ë²•ì€ ê°ì²´ë¥¼ ê°€ì§€ê³  Union íƒ€ì…ì„ ë§Œë“œëŠ” ê²ƒì´ë‹¤

enumìœ¼ë¡œ union ë§Œë“¤ ë°©ë²•ì„ êµ¬ê¸€ë§(`'typescript enum union'`)í•˜ë©´ ë‚˜ì—ê²Œ ê°€ì¥ ë¨¼ì € ëœ¨ëŠ” ê¸€ì¸

ì •ê·œí˜„ë‹˜ì˜ [enum type ëŒ€ì‹  union typeìœ¼ë¡œ ë³€ê²½í•˜ê¸°](https://ajdkfl6445.gitbook.io/study/typescript/enum-type-union-type)ì—ì„œë„ ê·¸ ë°©ì‹ì„ ê°œì„ í•˜ì—¬ ì‚¬ìš©í•œ ê²½í—˜ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤

ì—¬ê¸°ì„œ í•µì‹¬ì€ ì•„ë˜ì™€ ê°™ë‹¤

```typescript
const READONLY_ê°ì²´ = ê°ì²´ as const;
type enumLike = keyof READONLY_ê°ì²´[keyof typeof READONLY_ê°ì²´]
```

ì§§ê³  ìœ ìš©í•œ ì½”ë“œì§€ë§Œ, ë¶€ì¡±í•œ ë‚˜ì—ê²ŒëŠ” ì´ê²Œ ë­˜ ì˜ë¯¸í•˜ëŠ”ì§€ í•œë²ˆì— íŒŒì•…í•˜ê¸°ê°€ ì¡°ê¸ˆ ì–´ë µë‹¤ê³  ëŠê»´ì¡Œë‹¤

ë‹¤ë§Œ `Readonly` íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤ëŠ” ì ì—ì„œ íŒíŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤ 

_(ì´ê²Œ ê¼­ í•„ìš”í•œ ê±´ì§€ëŠ” ì•„ì§ í…ŒìŠ¤íŠ¸ë¥¼ ì•ˆí•´ë´¤ë‹¤...)_

<br />

## _(ì ì–´ë„ ë‚˜ì—ê²ŒëŠ”)_ ì¢€ë” í¸í•œ ë°©ë²•!

ê²°ë¡ ì€ ì•„ë˜ì™€ ê°™ë‹¤

```typescript
// periods.ts
type ReadonlyRecord<K extends string, V> = Readonly<Record<K, V>>;

export type PeriodANames = 'DAILY' | 'MONTHLY';
export const PeriodA: ReadonlyRecord<PeriodANames, PeriodANames> = {
  DAILY: 'DAILY',
  MONTHLY: 'MONTHLY',
};

type PeriodCommonNames = 'WEEKLY' | 'QUARTERLY' | 'YEARLY';
const PeriodCommon: ReadonlyRecord<PeriodCommonNames, PeriodCommonNames> = { /** */ }

export type PeriodNames = PeriodANames | PeriodCommonNames;
export const Periods = { ...PeriodA, ...PeriodCommon };
```

<br />

### ì»¤ìŠ¤í…€ ìœ í‹¸ íƒ€ì… `ReadonlyRecord`

ì´ ë¶€ë¶„ì€ ë°˜ë“œì‹œ í•„ìš”í•œ ë¶€ë¶„ì€ ì•„ë‹ˆê³ , ê°œì¸ì ìœ¼ë¡œ ê°ì²´ë¥¼ `Reaonly`ë¡œ ë§Œë“œëŠ” ê²½ìš°ê°€ ë§ì•„ ë”°ë¡œ ì„ ì–¸í–ˆë‹¤

ì‹¤ë¬´ ì½”ë“œì—ì„œëŠ” ì¢€ë” í¸í•œ ì½”ë”©ì„ ìœ„í•´ ë¼ë¥¼ ë¶€ë ¤ì„œ ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í–ˆë‹¤

ê°ì²´ `key`, `value`ê°€ ëª¨ë‘ `string`ì¸ ê²½ìš°ì—ëŠ” ê¸°ë³¸ê°’ ë•ë¶„ì— ì œë„¤ë¦­ì„ ìƒëµí•  ìˆ˜ ìˆê³ , 

`string`ì€ ì•„ë‹ˆì§€ë§Œ `key`, `value`ê°€ ë™ì¼í•œ íƒ€ì…ì¸ ê²½ìš°ëŠ” í•˜ë‚˜ë§Œ ì ì–´ì£¼ë©´ ëœë‹¤

```typescript
export type ReadonlyRecord<P extends string = string, Q = P> = Readonly<Record<P, Q>>;

export const PeriodA: ReadonlyRecord<PeriodANames> = { /** */ }
```

<br />

### `literal` íƒ€ì…; `PeriodNames`, `_RestPeriodNames`

ë‹¨ìˆœí•œ ë¬¸ìì—´ literal íƒ€ì…ì´ë‹¤

Unionì´ë¼ëŠ” ì˜ë¯¸ì— ë§ê²Œ, ***ê´€ì‹¬ì‚¬ì— ë”°ë¼ ë¶„ë¦¬ëœ íƒ€ì…ë“¤ì„ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ê²ƒì´ ì‰½ë‹¤***

`keyof typeof ê°ì²´`ë¥¼ ëŒ€ì‹ í•˜ê¸° ìœ„í•´ íƒ€ì…ì„ í•˜ë‚˜í•˜ë‚˜ ë” ì¨ì•¼í•œë‹¤ëŠ” ê²ƒì´ ë‹¨ì ì´ê¸°ëŠ” í•˜ì§€ë§Œ,

ì•„ë˜ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ìë™ì™„ì„±ì´ ë˜ê¸° ë•Œë¬¸ì— í¬ê²Œ ë¶ˆí¸í•¨ì„ ëŠë¼ì§„ ì•Šì„ìˆ˜ ìˆë‹¤

ì˜¤íˆë ¤ í•˜ë‚˜ì˜ íƒ€ì…ì— ë„ˆë¬´ ë§ì€ ì†ì„±ì´ ìˆì–´ì„œ íƒ€ì´í•‘ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ì •ë„ë¼ë©´, íƒ€ì…ì„ ì¶©ë¶„íˆ ë¶„ë¦¬í•˜ì§€ ëª»í•œ ê²Œ ì•„ë‹ì§€ ê²€í† í•´ë´ì•¼ í•  ê²ƒ ê°™ë‹¤

ë˜ í† ìŠ¤ ë¸”ë¡œê·¸ì—ì„œ ì†Œê°œí•œ ê²ƒì²˜ëŸ¼, **`template-literal` íƒ€ì…ë“¤ì„ ì¡°í•©í•œ ìƒˆë¡œìš´ íƒ€ì…ë“¤ì„ ì„ ì–¸í•˜ê¸° ë§¤ìš° í¸ë¦¬í•´ì§„ë‹¤**

```typescript
export type MarketNames = 'domestic' | 'overseas';
export type CategoryNames = 'index' | 'stock';

export type DetailChartTypeNames = `${MarketNames}-${CategoryNames}`;
export const DetailChartTypes: ReadonlyRecord<DetailChartTypeNames> = {
  'domestic-index': 'domestic-index',
  'domestic-stock': 'domestic-stock',
  'overseas-index': 'overseas-index',
  'overseas-stock': 'overseas-stock',
};
```


<br />

### Readonly ê°ì²´ë¥¼ `class-validator IsEnum`ì— í™œìš©

```typescript
// get-chart-dto.ts
export class GetChartDto {
  @IsNotEmpty()
  @IsEnum(Periods)
  period: PeriodNames;
}
```

`literal`ì„ í™œìš©í•˜ì—¬ ì•ˆì „í•œ(type-safe) `Readonly` ê°ì²´ë¥¼ ë§Œë“¤ê³ , `class-validator`ì—ì„œ í™œìš©í•œë‹¤

`class-validator`ê°€ ì•„ë‹ˆë”ë¼ë„, ê¸°ì¡´ `enum` ì‚¬ìš©í•˜ë“¯ `Periods.DAILY`ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤

JSë¡œ Transpile ë˜ì—ˆì„ë•Œ, ë‹¨ìˆœ ê°ì²´ ë¦¬í„°ëŸ´ì´ê¸° ë•Œë¬¸ì— ë¼ì¸ ë¸”ë¡œê·¸ëŒ€ë¡œë¼ë©´ tree-shakingë„ ê°€ëŠ¥í•˜ë‹¤