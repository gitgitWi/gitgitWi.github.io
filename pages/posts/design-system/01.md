# [FEì¥¬ë‹ˆì–´ì˜ Design System] 01. Personal Design System, `Storybook`, `Vite`ë¡œ í™˜ê²½ ì„¤ì •í•˜ê¸°

> _`Storybook` + `React`ë¡œ DesignSystem/ComponentLibrary ë§Œë“œëŠ” íŠœí† ë¦¬ì–¼ì€ ì´ë¯¸ ë¸”ë¡œê·¸, Youtubeì— ë„ë ¤ìˆë‹¤_
>
> _Airbnb, GitHub ë“± ê°œë°œíŒ€ì—ì„œ ë§Œë“  `Storybook`ì€ ë¬¼ë¡ ì´ê³ , GitHubê°€ ê³µê°œëœ ê²½ìš°ë„ ìˆë‹¤ *(ì•„ë˜ references ì°¸ê³ )*_

[ğŸ‘‰&nbsp;&nbsp;êµ¬í˜„ ì¤‘ì¸ `GetIt-UI` GitHub ë³´ê¸°](https://github.com/gitgitWi/getit-ui)

## Motivation

- ìš”ì¦˜ ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ì„ `Storybook` ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰ì¤‘([zum-stock-line-stories](http://zum-stock-line-stories.surge.sh/))ì¸ë°, ìƒê°ë³´ë‹¤ ì—„ì²­ë‚œ ìƒì‚°ì„± í–¥ìƒì„ ë§›ë³´ë©° ì¬ë¯¸ë¥¼ ëŠë‚Œ

  - ë³„ë„ì˜ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ì§€ ì•Šì•„ë„ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ê²°ê³¼ë¥¼ HMRë¡œ ë³¼ ìˆ˜ ìˆìŒ (_ì´ê±´ ë‹¹ì—°í•œ ê±°!_)
  - **_ê°œë°œì ë„êµ¬ ë“¤ì–´ê°€ì„œ â¡ï¸ ë©”ë‰´ë¥¼ í´ë¦­í•˜ê³  â¡ï¸ ë­”ê°€ë¥¼ ì¡°ì •í•´ì•¼ í•˜ëŠ” ìˆ˜ê³ ë“¤ì„ ëœì–´ì¤Œ!_**
    - [Measure & Outline](https://storybook.js.org/docs/react/essentials/measure-and-outline): ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì¦ˆ, ì•„ì›ƒë¼ì¸ ë“± í™•ì¸ ê°€ëŠ¥
    - [Viewport](https://storybook.js.org/docs/react/essentials/viewport): mobile viewport preset ê°€ëŠ¥
  - Docsë¡œ í•œë²ˆì— ì—¬ëŸ¬ ë Œë”ë§ ìƒíƒœ í™•ì¸ ê°€ëŠ¥
  - addon ìƒíƒœê³„ê°€ í™œì„±í™”ë˜ì–´ìˆìŒ
    - Jest, Cypress ë“± ë‹¤ì–‘í•œ íˆ´ê³¼ì˜ í†µí•©
  - `Storybook`ì„ ë”°ë¡œ ë¹Œë“œ, ë°°í¬ ê°€ëŠ¥

    - í˜„ì¬ê¹Œì§€ ê°œë°œ ì§„í–‰ìƒí™© ê³µìœ  ê°€ëŠ¥
    - ìƒ‰ìƒ, í¬ê¸°, ë°ì´í„°ê°’ ë“± **_ì†ì„±ë“¤ì„ [`controls`](https://storybook.js.org/docs/react/essentials/controls)ë¡œ ë°”ê¿”ì„œ ë°”ë¡œ í™•ì¸ ê°€ëŠ¥_** ğŸ‘‰ ë””ìì´ë„ˆ/ê¸°íšìì™€ì˜ ë³´ë‹¤ ë¹ ë¥¸ ì†Œí†µ ê°€ëŠ¥í•  ë“¯?!

      ![zum-stock-line-stori_2022-2-2](https://user-images.githubusercontent.com/57997672/156254919-f4795507-1ecf-4e88-b8ef-a037ab071169.gif)

<br />

- ê±°ì˜ 1ë…„ì§¸ ë°©ì¹˜ ì¤‘ì¸ ê°œì¸ ë¸”ë¡œê·¸ëŠ” ë¬¼ë¡ ì´ê³ , **_ì…‹íŒ…ë§Œ ì—´ì‹¬íˆ í–ˆë˜ ê°œì¸ í”„ë¡œì íŠ¸ë“¤_** ë¹ ë¥´ê²Œ ì™„ì„±ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ë””ìì¸ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë³´ì

  - ë‹¨ê¸°ì ìœ¼ë¡œ 1ë…„ ì •ë„ëŠ” **ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬** êµ¬ì¶• ìœ„ì£¼ ë°©í–¥ì´ ë  ë“¯, ì•„ë¬´ë˜ë„ ë””ìì¸/UXì— ëŒ€í•œ ì§€ì‹ì´ ì—†ê¸° ë•Œë¬¸
  - ì¥ê¸° í”„ë¡œì íŠ¸ë¡œ ë””ìì¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°œì „ì‹œì¼œ ë‚˜ê°€ì

<br />

- íšŒì‚¬ ì—…ë¬´ì— ì ìš©í•˜ê¸° ì „ ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë„êµ¬ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
  - í•˜ê³  ì‹¶ì€ ê±° ë‹¤í•˜ì!!
  - ì–¼ë§ˆì „ _`ë‹¹ê·¼ë§ˆì¼“ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ë¼ì´ë¸Œ QnA ì„¸ì…˜`_ ì—ì„œ ì–»ì€ ì¸ì‚¬ì´íŠ¸
    - _íšŒì‚¬ ì½”ë“œë¥¼ í¬íŠ¸í´ë¦¬ì˜¤ë¡œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆ ìœ ì‚¬í•œ êµ¬í˜„ ë‚´ìš©ì„ ê°œì¸ GitHubì— ì˜¬ë ¤ë†“ëŠ” ê²ƒë„ ë°©ë²•ì´ë‹¤!_

---

## Design Patterns & Techs I Used

- **Atomic Design Pattern & Monorepo**

  - ê¸°ë³¸ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê¸° ë•Œë¬¸ì—, atoms, molecules, organisms ì •ë„ê¹Œì§€ë§Œ í•˜ë©´ ë  ë“¯
    - ì´ ë‹¨ê³„ì— ë”°ë¼ ê°ê°ì˜ íŒ¨í‚¤ì§€ êµ¬ì„±; `atoms/button`, `atoms/text` ë“±
  - ë””ìì¸ ì‹œìŠ¤í…œ ì¤‘ ë‹¨ì¼ Repoë¡œ êµ¬ì„±í•˜ëŠ” ê²½ìš°ë„ ë§ì§€ë§Œ, ì¶”í›„ `Svelte`, `Solid` ë“± ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬/ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° `rollup`, `esbuild` ë“± ë‹¤ì–‘í•œ ë¹Œë“œ íˆ´ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆë„ë¡ Monorepoë¡œ êµ¬ì„±
  - `Yarn berry` [PnP ëª¨ë“œ](https://yarnpkg.com/features/pnp)ì—ì„œ [workspace í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©](https://github.com/yarnpkg/berry/tree/master/packages/plugin-workspace-tools)

    ```bash
    getit-ui/
    â”£ atoms/ # atom packages
    â”ƒ â”£ button/
    â”ƒ â”ƒ â”£ src/
    â”ƒ â”ƒ â”£ package.json
    â”ƒ â”ƒ â”£ tsconfig.json
    â”ƒ â”ƒ â”£ tsconfig.node.json
    â”ƒ â”ƒ â”— vite.config.ts
    â”ƒ â”— text/
    â”ƒ   â”£ src/
    â”ƒ   â”£ package.json
    â”ƒ   â”£ tsconfig.json
    â”ƒ   â”£ tsconfig.node.json
    â”ƒ   â”— vite.config.ts
    â”£ molecules/ # molecules packages
    â”£ stories/ # storybook package
    â”ƒ â”£ .storybook/
    â”ƒ â”ƒ â”£ main.ts
    â”ƒ â”ƒ â”— preview.ts
    â”ƒ â”£ src/
    â”ƒ â”ƒ â”£ Introduction.stories.mdx
    â”ƒ â”ƒ â”£ react-app-env.d.ts
    â”ƒ â”ƒ â”— setupTests.ts
    â”ƒ â”£ .gitignore
    â”ƒ â”£ package.json
    â”ƒ â”— tsconfig.json
    â”ƒ # root configs
    â”£ .editorconfig
    â”£ .eslintignore
    â”£ .eslintrc.js
    â”£ .gitignore
    â”£ .pnp.cjs
    â”£ .pnp.loader.mjs
    â”£ .prettierrc
    â”£ .yarnrc.yml
    â”£ Dockerfile.dev
    â”£ README.md
    â”£ package.json
    â”£ tsconfig.components.json
    â”£ tsconfig.json
    â”— yarn.lock
    ```

<br />

- **`Storybook`**

  - êµ¬í˜„ëœ ì»´í¬ë„ŒíŠ¸ë“¤ ì‹œê° í…ŒìŠ¤íŠ¸
  - íšŒê·€, E2E ë“± ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸, ë¬¸ì„œí™”
  - ë³„ë„ì˜ ì „ìš© íŒ¨í‚¤ì§€(`stories`)ë¥¼ ë§Œë“¤ì–´ì„œ ì‹¤í–‰

<br />

- **`Vite` + `React`**

  - ì¼ë‹¨ì€ `React` ì»´í¬ë„ŒíŠ¸ ìœ„ì£¼ êµ¬ì„±
  - `Vite` [ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“œ](https://vitejs-kr.github.io/guide/build.html#library-mode)ë¡œ ë¹Œë“œ

<br />

- **`CSS(SCSS) Module`**

  - ê°œì¸ì ìœ¼ë¡œ `CSS`ë¥¼ í™œìš©í•  ë•Œ ê°€ì¥ ì„ í˜¸í•˜ëŠ” ë°©ì‹
  - `styled-component`/`emotion` ë³´ë‹¤ `CSS` ê·¸ ìì²´ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ, `JS` ë°©ì‹ìœ¼ë¡œ `className` ì ìš©ì„ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆìŒ
    - [Real-world CSS vs. CSS-in-JS performance comparison](https://pustelto.com/blog/css-vs-css-in-js-perf/); ì„±ëŠ¥ ë©´ì—ì„œ `CSS-in-JS`ê°€ ì¢‹ì§€ ì•Šë‹¤ëŠ” ì´ì•¼ê¸°ë„..
  - íŠ¹íˆ ì´ë²ˆ ëŒ€ì„  ì°¨íŠ¸ êµ¬í˜„í•  ë•Œ ì´ì ì„ í¬ê²Œ ë§›ë³´ê²Œ ë˜ì—ˆëŠ”ë°, IEì—ì„œ `grid(-ms-grid)`ê°€ ìƒê°ëŒ€ë¡œ ì»¨íŠ¸ë¡¤ í•˜ê¸° ì–´ë µë‹¤ëŠ” ì  ë•Œë¬¸ì—, IE ì „ìš© í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ `userAgent`ì— ë”°ë¼ ë¶„ê¸°ì²˜ë¦¬í•´ ì ìš©í•¨

    ```scss
    // ëª¨ë˜ ë¸Œë¼ìš°ì € í´ë˜ìŠ¤
    .line {
      @extend .line-default;
      display: grid;
      grid-template-columns: 13px minmax(36px, auto) minmax(46px, auto);
    }

    // IE ì „ìš© í´ë˜ìŠ¤
    .line-ie {
      @extend .line-default;
      display: -ms-flexbox;

      div {
        margin-right: 5px;
      }

      p {
        width: 47px;
      }
    }
    ```

    ```typescript
    // line ì»´í¬ë„ŒíŠ¸ (VanillaJS)
    classNames: [IS_IE ? styles['line-ie'] : styles['line'], ...classNames];
    // ...
    ```

---

## _Problem & Solutions_

### `Vite` ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“œ ë¹Œë“œ -> ëª¨ë…¸ë ˆí¬ì—ì„œ ì‚¬ìš©ì‹œ `CSS`ë¥¼ ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ” ë¬¸ì œ?

**_Problem_**

- HTML íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ê²Œ ì•„ë‹Œ, JSë¡œ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë¡œì§ë§Œ ë§Œë“œëŠ” ê²ƒ
- ì¼ë°˜ì ì¸ í˜ì´ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ê²½ìš°, `Webpack` ë“± ë²ˆë“¤ëŸ¬ê°€ `HTML`ì— `link` íƒœê·¸ë¥¼ ìë™ì‚½ì…í•˜ê³ , ë Œë”ë§ì‹œ ìŠ¤íƒ€ì¼ì„ ë°˜ì˜í•¨
- ê·¸ëŸ°ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“œì—ì„œ ë¹Œë“œì‹œ JSì— `CSS Module` í´ë˜ìŠ¤ëª…ë§Œ ê°€ì ¸ì˜¤ê³ , CSS íŒŒì¼(`import 'styles.css'`)ì„ ê°€ì ¸ì˜¤ì§€ ì•ŠìŒ
- **_ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ìš©ì‹œ ìŠ¤íƒ€ì¼ ì ìš© ì•ˆë¨_**

  ![image](https://user-images.githubusercontent.com/57997672/156269529-6740dc85-674a-43b1-be44-badcdd9b6d4f.png)

<br />

**_Solution_**

- [vite-plugin-css-injected-by-js](https://www.npmjs.com/package/vite-plugin-css-injected-by-js?activeTab=readme) ì‚¬ìš©

  - `vite.config.ts`ì—ì„œ í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€

  ```javascript
  import cssInject from 'vite-plugin-css-injected-by-js';

  export default defineConfig({
    plugins: [react(), cssInject()],

    /** ê¸°íƒ€ ì„¤ì • */
  });
  ```

  - ë¹Œë“œì‹œ ì•„ë˜ì™€ ê°™ì´ `style` íƒœê·¸ ìƒì„± ë¡œì§ì„ ìƒì„±, ë¹Œë“œëœ íŒŒì¼ ìƒë‹¨ì— ì‚½ì…

    ![image](https://user-images.githubusercontent.com/57997672/156269833-c3533abf-75d6-4d09-923c-b1dd37b78ec8.png)

    - ë™ì¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—¬ëŸ¬ê°œ í˜¸ì¶œí•˜ë”ë¼ë„ í•˜ë‚˜ì˜ `style` íƒœê·¸ë§Œ ìƒì„±í•¨

    ![image](https://user-images.githubusercontent.com/57997672/156270703-4cc60b4e-36c5-4b03-9e56-86c26d0d5347.png)

    - _ê·¼ë° ì´ë ‡ê²Œ ë˜ë©´ `CSS-in-JS`ë¥¼ ì“°ëŠ” ë°©ì‹ê³¼ ì„±ëŠ¥ë©´ì—ì„œ ì°¨ì´ê°€ ì—†ì–´ì§ˆ ìˆ˜ë„ ìˆì§€ ì•Šì„ê¹Œí•˜ëŠ” ì˜ë¬¸ì´.._

<br />

### Storybook ì „ìš© `stories` íŒ¨í‚¤ì§€ì—ì„œ Vite ì‚¬ìš©ì‹œ ë¹Œë“œ ì˜¤ë¥˜

**_Problem_**

- í˜„ì¬ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ íŒ¨í‚¤ì§€ + `Storybook` ì „ìš© íŒ¨í‚¤ì§€ê°€ ìˆëŠ” ìƒí™©
- ì»´í¬ë„ŒíŠ¸ íŒ¨í‚¤ì§€ë“¤ì´ ì´ë¯¸ `Vite`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³ , (ì™ ë§Œí•˜ë©´) `Webpack` ë³´ë‹¤ëŠ” `Vite`ê°€ ë¹Œë“œ íƒ€ì„ì´ ì§§ê¸° ë•Œë¬¸ì— [Vite ë¹Œë”](https://storybook.js.org/blog/storybook-for-vite/)ë¥¼ ì¨ë³´ë ¤ê³  ì‹œë„ í•¨
- ë¬¸ì œëŠ” `Yarn berry` í™˜ê²½ì—ì„œ `Vite` ë¹Œë”ê°€ ì˜ì¡´ì„± ì œëŒ€ë¡œ ëª» ì°¾ê³  ë¹Œë“œê°€ ì•ˆë¨
  - <https://github.com/eirslett/storybook-builder-vite/issues/141>; '22.3.2. í˜„ì¬ ì•„ì§ í•´ê²°ë˜ì§€ ì•Šì€ ì´ìŠˆğŸ˜­

**_Solution_**

- ì•„ì‰½ì§€ë§Œ `stories` íŒ¨í‚¤ì§€ë§Œ ë¹Œë”ë¥¼ `CRA` + `Webpack5`ë¡œ ì§€ì •í•´ ì‚¬ìš© ì¤‘
- ë‚´ ìƒê°ì— ë² ìŠ¤íŠ¸ëŠ”, `Storybook` ì „ìš© íŒ¨í‚¤ì§€ë¥¼ ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì§€ ì•Šê³ , ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ íŒ¨í‚¤ì§€ì—ì„œ `story` íŒŒì¼ë¥¼ ë§Œë“¤ì–´ì„œ rootì—ì„œ previewë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•˜ëŠ” ê²ƒ
  - ë‹¤ë§Œ Monorepo êµ¬ì¡°ì˜ rootì—ì„œëŠ” ë­”ê°€ ì„¤ì •í•˜ê¸°ê°€ ê¹Œë‹¤ë¡œì›€
    - `Storybook` ìì²´ê°€ ë¹ˆ í”„ë¡œì íŠ¸ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì¸ë“¯
      > _Storybook needs to be installed into a project that is already set up with a framework. It will not work on an empty project.(<https://storybook.js.org/docs/react/get-started/install>)_
  - _ì¢€ë” ì—°êµ¬í•´ë´ì•¼ í•  ë“¯..?_
  - í•œí¸ íŒ¨í‚¤ì§€ë¥¼ ë¶„ë¦¬í–ˆê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ `import` í–ˆì„ ë•Œ ì˜ ë˜ëŠ”ì§€ í™•ì¸ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì€ ìˆëŠ” ë“¯

<br />

---

### References

#### Design System Overview

- [í† ìŠ¤, ì—ì–´ë¹„ì•¤ë¹„ë¡œ ì•Œì•„ë³´ëŠ” ë””ìì¸ ì‹œìŠ¤í…œì˜ ë‚´ì¼](https://dewberry9.github.io/future-of-design-system)
- [Do you think your component library is your design system? Think again](https://uxdesign.cc/do-you-think-your-component-library-is-your-design-system-think-again-7e2c902b5275)

#### Real-World Cases

- [awesome-storybook](https://project-awesome.org/lauthieb/awesome-storybook)
- [awesome-design-systems](https://github.com/alexpate/awesome-design-systems)
- ì¿ íŒ¡: [ì´ì»¤ë¨¸ìŠ¤ì— ìµœì í™”ëœ ë””ìì¸ ì‹œìŠ¤í…œ, RDS](https://youtu.be/g4f7p0YcVnc) - ì£¼ë¡œ UX ë””ìì¸ì— ëŒ€í•œ ì´ì•¼ê¸°
- í† ìŠ¤
  - [TDSë¡œ UI ìŒ“ê¸° : ê·¸ ë§ë˜ ì½”ë“œëŠ” ëˆ„ê°€ ë‹¤ ì¹˜ì› ì„ê¹Œ?](https://youtu.be/pfKuEuufgdc) - í† ìŠ¤ ì•ˆë“œë¡œì´ë“œ
  - [Do more, with less. - ë””ìì¸ ì‹œìŠ¤í…œ, ê·¸ë‹¤ìŒì€?](https://youtu.be/LmLchZ4tCXc) - í† ìŠ¤ FE
- ë°°ë¯¼: [[6ì›” ìš°ì•„í•œí…Œí¬ì„¸ë¯¸ë‚˜] ë””ìì¸ì‹œìŠ¤í…œì´ ê°€ì ¸ì˜¨ ë³€í™”](https://youtu.be/aVHLcQzcRbA) - ë°°ë¯¼ FE
- LINE: [ê°œë°œìì™€ ë””ìì´ë„ˆì˜ í˜‘ì—…ì„ ìœ„í•œ LINE ë””ìì¸ ì‹œìŠ¤í…œ, LDS ì†Œê°œ](https://engineering.linecorp.com/ko/blog/line-design-system/)
- SOCAR: [[SOCAR FRAME ë§Œë“¤ê¸° #1] ì˜ì¹´ì˜ ë””ìì¸ ì‹œìŠ¤í…œ ë§›ë³´ê¸°1~5](https://tech.socarcorp.kr/design/2020/06/23/socar-design-system-01.html)
- ì¹´ì¹´ì˜¤: [FEê°œë°œìì˜ ì„±ì¥ ìŠ¤í† ë¦¬ 03 : ì¹´ì¹´ì˜¤ ì–´ë“œë¯¼ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ëª¨ë…¸ë ˆí¬ë¡œ ê°œë°œí•˜ì—¬ ì–»ì€ ê²ƒë“¤](https://tech.kakao.com/2020/12/03/frontend-growth-03/)
- AirBnB: [Building (And Re-Building) the Airbnb Design System | Maja Wichrowska & Tae Kim](https://youtu.be/fHQ1WSx41CA) - 2016ë…„ ì´í›„ AirBnBì—ì„œ React ê¸°ë°˜ ë””ìì¸ ì‹œìŠ¤í…œì„ ë§Œë“¤ê²Œ ëœ ë°°ê²½
